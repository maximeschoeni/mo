{
  "navigation": {
    "children": [
      {
        "type": "menu",
        "items": [
          {
            "title": "Carousel",
            "hash": "table=carousel"
          },
          {
            "title": "Files",
            "hash": "table=files"
          },
          {
            "title": "Stories",
            "hash": "table=stories"
          },
          {
            "title": "Game Groups",
            "hash": "table=gameGroups"
          },
          {
            "title": "Games",
            "hash": "table=games"
          },
          {
            "title": "Sports",
            "hash": "table=sports"
          },
          {
            "title": "Countries",
            "hash": "table=countries"
          },
          {
            "title": "Story Options",
            "hash": "table=stories-options"
          }
        ]
      }
    ]
  },
  "tables":[
    {
      "id":"carousel",
      "driver":"items",
      "type":"tableGrid",
      "params": {
        "ppp": 20
      },
      "title": "Carousel",
      "style": "flex: 1 1 0",
      "modal": {
        "body": {
          "children": [
            {
              "type": "textarea",
              "key": "titre",
              "label": "titre",
              "translatable" : true,
              "hidden": true
            },
            {
              "type": "textarea",
              "key": "auteur",
              "label": "auteur",
              "translatable" : true,
              "hidden": true
            },
            {
              "type": "textarea",
              "key": "denom",
              "label": "denom",
              "translatable" : true,
              "hidden": true
            },
            {
              "type": "input",
              "key": "jeux",
              "label": "jeux",
              "translatable" : true
            },
            {
              "type": "textarea",
              "key": "dimension",
              "label": "dimension",
              "translatable" : true,
              "hidden": true
            },
            {
              "type": "textarea",
              "key": "technique",
              "label": "technique",
              "translatable" : true,
              "hidden": true
            },
            {
              "type": "textarea",
              "key": "note",
              "label": "note",
              "input": {
                "style": "height:20em"
              },
              "translatable" : true
            },
            {
              "type": "input",
              "key": "noinv",
              "label": "noinv"
            },
            {
              "type": "gallery",
              "label": "Gallery",
              "key": "images",
              "table": "files",
              "driver": "files",
              "joins": [],
              "parent": "4"
            }
          ]
        }
      },
      "children": [
        {
          "label": "",
          "type": "tableIndex"
        },
        {
          "label": "Titre",
          "sortable": true,
          "order": "asc",
          "width": "1fr",
          "orderby": "jeux",
          "type": "modalHandle",
          "value": ["?", ["=", ["getParam", "language"], "en"], ["get", "string", "jeux-en"], ["get", "string", "jeux"]]
        },
        {
          "type": "input",
          "key": "noinv",
          "label": "noinv"
        },
        {
          "type": "text",
          "label": "Date",
          "value": ["date", ["get", "string", "date"]],
          "orderby": "date",
          "order": "desc",
          "sortable": true
        }



      ],
      "controls": {
        "children": [
          "save",
          "add",
          "delete",
          "separator",
          {
            "type": "button",
            "action": "switch-language",
            "value": "en",
            "text": "en",
            "active": ["=", ["request", "language", "string"], "en"]
          },
          {
            "type": "button",
            "action": "switch-language",
            "value": "",
            "text": "fr",
            "active": ["=", ["request", "language", "string"], "fr"]
          },
          "undo",
          "redo",
          "insert"
        ]
      },
      "filters":{
        "type":"group",
        "display":"flex",
        "children":[
          {
            "type":"dropdown",
            "label":"Categorie",
            "options":[
              {
                "id":"",
                "name":"-"
              },
              {
                "id":"1",
                "name":"Categorie 1"
              },
              {
                "id":"2",
                "name":"Categorie 2"
              }
            ]
          },
          {
            "type":"input",
            "label":"Search",
            "key":"search"
          }
        ]
      }
    },
    {
      "id": "files",
      "type": "tableMedias",
      "driver": "files",
      "title": "Media Library",
      "params": {
        "ppp": 100,
        "orderby": "name",
        "parent": "0"
      },
      "header": {
        "children": [
          {
            "type": "title",
            "value": "Media Library"
          },
          "count",
          "pagination",
          "close"
        ]
      },
      "modal": {
        "width": "25em",
        "keepAlive": true,
        "header": {
          "children": [
            {
              "type": "title",
              "value": "Media"
            },
            "prev",
            "next",
            "close"
          ]
        },
        "body": {
          "children": [
            "mediaDescription",
            {
              "type": "group",
              "display": "flex",
              "children": [
                {
                  "type": "changeFile",
                  "title": "Change file",
                  "action": ["request", "change-file"],
                  "visible": ["=", ["get", "string", "filetype"], "file"]
                },
                {
                  "type": "button",
                  "title": "Regenerate files",
                  "action": "regen",
                  "visible": ["=", ["get", "string", "filetype"], "file"]
                }
              ]
            },
            {
              "type": "input",
              "key": "name",
              "visible": ["=", ["get", "string", "filetype"], "folder"]
            },
            {
              "type": "breadcrumb",
              "key": "parent",
              "visible": ["!", ["selection"]]
            }
          ]
        }
      },

      "controls": {
        "children": [
          "save",
          {
            "type": "add",
            "title": "Create Folder",
            "value": {
              "filetype": "folder"
            }
          },
          {
            "type": "upload",
            "title": "Upload File"
          },
          "delete",
          "separator",
          "undo",
          "redo",
          "insert"
        ]
      },
      "filters": {
        "type": "group",
        "display": "flex",
        "children": [
          {
            "label": "Directory",
            "type": "directoryDropdown",
            "key": "parent",
            "options": [{"id": "0", "name": "Uploads"}]
          },
          "separator",
          {
            "type": "input",
            "label": "Search",
            "key": "search"
          }
        ]
      }


    },
    {
      "id": "stories",
      "driver": "stories",
      "type": "tableGrid",
      "params": {
        "ppp": 20
      },
      "title": "Stories",
      "filters": {
        "display": "flex",
        "children": [
          {
            "type": "dropdown",
            "key": "season",
            "label": "Summer/Winter",
            "options": [
              {"id": "", "name": "-"},
              {"id": "1", "name": "Summer"},
              {"id": "2", "name": "Winter"}
            ]
          },
          {
            "type": "dropdown",
            "key": "gameGroup",
            "label": "Game Group",
            "options": [{"id": "", "name": "-"}],
            "table": "gameGroups"
          },
          {
            "type": "dropdown",
            "key": "country",
            "label": "Country",
            "options": [{"id": "", "name": "-"}],
            "table": "countries"
          },
          {
            "type": "dropdown",
            "key": "sport",
            "label": "Sport",
            "options": [{"id": "", "name": "-"}],
            "table": "sports"
          },
          "separator",
          {
            "type": "input",
            "key": "search",
            "label": "Search",
            "input": {"type": "search"}
          }
        ]
      },
      "modal": {
        "width": "40em",
        "body": {
          "children": [
            {
              "type": "group",
              "display": "flex",
              "children": [
                {
                  "type": "dropdown",
                  "label": "Winter/Summer",
                  "key": "season",
                  "options": [
                    {"id": "", "name": "-"},
                    {"id": "1", "name": "Summer"},
                    {"id": "2", "name": "Winter"}
                  ]
                },
                {
                  "type": "dropdown",
                  "label": "Game Group",
                  "key": "gameGroup",
                  "options": [{"id": "", "name": "-"}],
                  "table": "gameGroups"
                }
              ]
            },
            {
              "type": "tags",
              "key": "country",
              "label": "Country",
              "table": "countries"
            },
            {
              "type": "group",
              "display": "flex",
              "children": [
                {
                  "type": "input",
                  "key": "firstname",
                  "label": "Firstame"
                },
                {
                  "type": "input",
                  "key": "lastname",
                  "label": "Lastname"
                }
              ]
            },
            {
              "type": "input",
              "key": "nicknames",
              "label": "Nicknames"
            },
            {
              "type": "input",
              "key": "title",
              "label": "Title",
              "translatable" : true
            },
            {
              "type": "tags",
              "key": "sport",
              "label": "Sport",
              "table": "sports",
              "max": 1
            },
            {
              "type": "array",
              "key": "games",
              "label": "Games",
              "children": [
                {
                  "type": "tags",
                  "key": "game",
                  "label": "Game",
                  "table": "games",
                  "max": 1,
                  "width": "1fr"
                },
                {
                  "type": "input",
                  "key": "discipline",
                  "label": "Discipline",
                  "width": "30%"
                },
                {
                  "type": "dropdown",
                  "key": "medal",
                  "label": "Medal",
                  "options": [
                    {"id": "", "name": "-"},
                    {"id": "1", "name": "Gold"},
                    {"id": "2", "name": "Silver"},
                    {"id": "3", "name": "Bronze"}
                  ],
                  "width": "20%"
                }
              ]
            },
            {
              "type": "array",
              "key": "medias",
              "label": "Medias",
              "children": [
                {
                  "type": "gallery",
                  "max": 1,
                  "key": "file",
                  "table": "files",
                  "folder": "stories",
                  "driver": "files",
                  "joins": [],
                  "width": "auto"
                },
                {
                  "type": "group",
                  "width": "1fr",
                  "children": [
                    {
                      "type": "input",
                      "label": "Copyright",
                      "key": "copyright"
                    },
                    {
                      "type": "input",
                      "key": "caption",
                      "label": "Caption"
                    },
                    {
                      "type": "textarea",
                      "key": "body",
                      "label": "Body"
                    }
                  ]
                }
              ]
            }
          ]
        }
      },
      "children": [
        {
          "label": "",
          "type": "tableIndex"
        },
        {
          "label": "Name",
          "sortable": true,
          "order": "asc",
          "width": "auto",
          "orderby": "lastname",
          "type": "modalHandle",
          "value": ["replace", "% %", "%", ["get", "string", "firstname"], ["get", "string", "lastname"]]
        },
        {
          "label": "Title",
          "width": "1fr",
          "type": "modalHandle",
          "key": "title"
        },
        {
          "label": "Sport",
          "sortable": true,
          "order": "asc",
          "orderby": "sport",
          "type": "modalHandle",
          "value": ["query", "sports", "", [], "string", ["get", "string", "sport"], "name"]
        },
        {
          "label": "Country",
          "sortable": true,
          "order": "asc",
          "orderby": "country",
          "type": "modalHandle",
          "value": ["query", "countries", "", [], "string", ["get", "string", "country"], "name"]
        }
      ],
      "controls": {
        "children": [
          "save",
          "add",
          "delete",
          "separator",
          {
            "type": "button",
            "action": "switch-language",
            "value": "en",
            "text": "en",
            "active": ["=", ["request", "language", "string"], "en"]
          },
          {
            "type": "button",
            "action": "switch-language",
            "value": "",
            "text": "fr",
            "active": ["=", ["request", "language", "string"], "fr"]
          },
          "undo",
          "redo",
          "insert"
        ]
      }
    },
    {
      "id": "sports",
      "driver": "sports",
      "type": "tableGrid",
      "params": {
        "ppp": 20
      },
      "title": "Sports",
      "children": [
        {
          "label": "",
          "type": "tableIndex"
        },
        {
          "label": "Name",
          "sortable": true,
          "orderby": "name",
          "type": "handle",
          "value": ["get", "string", "name"],
          "width": "1fr"
        }
      ],
      "modal": {
        "body": {
          "children": [
            {
              "label": "Name",
              "sortable": true,
              "type": "input",
              "key": "name",
              "width": "1fr"
            }
          ]
        }
      },
      "controls": {
        "children": [
          "save",
          "add",
          "delete",
          "separator",
          {
            "type": "button",
            "action": "switch-language",
            "value": "en",
            "text": "en",
            "active": ["=", ["request", "language", "string"], "en"]
          },
          {
            "type": "button",
            "action": "switch-language",
            "value": "",
            "text": "fr",
            "active": ["=", ["request", "language", "string"], "fr"]
          },
          "undo",
          "redo",
          "insert"
        ]
      }
    },
    {
      "id": "countries",
      "driver": "countries",
      "type": "tableGrid",
      "params": {
        "ppp": 20
      },
      "title": "Countries",
      "children": [
        {
          "label": "",
          "type": "tableIndex"
        },
        {
          "label": "Name",
          "sortable": true,
          "order": "asc",
          "width": "1fr",
          "orderby": "name",
          "type": "handle",
          "value": ["get", "string", "name"]
        }

      ],
      "modal": {
        "body": {
          "children": [
            {
              "label": "Name",
              "sortable": true,
              "type": "input",
              "key": "name"
            },
            {
              "label": "Image",
              "type": "gallery",
              "key": "image",
              "max": 1,
              "table": "files",
              "folder": "countries",
              "driver": "files",
              "joins": [],
              "query": {
                "driver": "files",
                "joins": []
              }
            }
          ]
        }
      },
      "controls": {
        "children": [
          "save",
          "add",
          "delete",
          "separator",
          {
            "type": "button",
            "action": "switch-language",
            "value": "en",
            "text": "en",
            "active": ["=", ["request", "language", "string"], "en"]
          },
          {
            "type": "button",
            "action": "switch-language",
            "value": "",
            "text": "fr",
            "active": ["=", ["request", "language", "string"], "fr"]
          },
          "undo",
          "redo",
          "insert"
        ]
      }
    },
    {
      "id": "games",
      "driver": "games",
      "type": "tableGrid",
      "params": {
        "ppp": 20
      },
      "title": "Games",
      "children": [
        {
          "label": "",
          "type": "tableIndex"
        },
        {
          "type": "handle",
          "label": "Name",
          "value": ["get", "string", "name"],
          "width": "1fr"
        }
      ],
      "modal": {
        "body": {
          "children": [
            {
              "label": "Year",
              "type": "input",
              "key": "year"
            },
            {
              "label": "City",
              "sortable": true,
              "type": "input",
              "key": "city",
              "width": "1fr"
            },
            {
              "label": "Season",
              "type": "dropdown",
              "key": "season",
              "options": [
                {"id": "", "name": "-"},
                {"id": "1", "name": "Summer"},
                {"id": "2", "name": "Winter"}
              ]
            }
          ]
        }
      },
      "controls": {
        "children": [
          "save",
          "add",
          "delete",
          "separator",
          "undo",
          "redo",
          "insert"
        ]
      }
    },
    {
      "id": "gameGroups",
      "driver": "gameGroups",
      "type": "tableGrid",
      "params": {
        "ppp": 20
      },
      "title": "Game Groups",
      "children": [
        {
          "label": "",
          "type": "tableIndex"
        },
        {
          "label": "Name",
          "sortable": true,
          "orderby": "name",
          "type": "handle",
          "value": ["get", "string", "name"],
          "width": "1fr"
        }
      ],
      "modal": {
        "body": {
          "children": [
            {
              "label": "Season",
              "type": "dropdown",
              "key": "season",
              "options": [
                {"id": "", "name": "-"},
                {"id": "1", "name": "Summer"},
                {"id": "2", "name": "Winter"}
              ]
            },
            {
              "label": "Début",
              "type": "input",
              "key": "date1"
            },
            {
              "label": "Fin",
              "type": "input",
              "key": "date2"
            }
          ]
        }
      },
      "controls": {
        "children": [
          "save",
          "add",
          "delete",
          "separator",
          "undo",
          "redo",
          "insert"
        ]
      }
    },
    {
      "id": "stories-options",
      "driver": "options",
      "type": "table",
      "content": {
        "key": "stories"
      },
      "params": {
        "ids": "stories"
      },
      "children": [
        {
          "type": "input",
          "key": "test",
          "label": "Test"
        }
      ],
      "controls": {
        "children": [
          "save",
          "separator",
          "undo",
          "redo"
        ]
      }

    }
  ]
}
